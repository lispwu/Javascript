<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Duncan's Just-In-Time Donuts</title>
	<link rel="stylesheet" type="text/css" href="donuts.css" />
	<script>
		function updateOrder(){
			const TAXRATE = 0.05;
			const DONUTPRICE = 0.5;
			var numCakeDonuts = parseDonuts(document.getElementById("cakedonuts").value);
			var numGlazedDonuts = parseDonuts(document.getElementById("glazeddonuts").value);
			if(isNaN(numCakeDonuts))
				numCakeDonuts = 0;
			if(isNaN(numGlazedDonuts))
				numGlazedDonuts = 0;
			var subTotal = (numCakeDonuts + numGlazedDonuts) * DONUTPRICE;
			var tax = subTotal * TAXRATE;
			var total = subTotal + tax;
			document.getElementById("subtotal").value = "$" + subTotal.toFixed(2);
			document.getElementById("tax").value = "$" + tax.toFixed(2);
			document.getElementById("total").value = "$" + total.toFixed(2);
			}
		function parseDonuts(donutString) {     //如果这个函数的执行顺序在第一个函数之后呢？  不可能，第一个函数会调用这个函数
			numDonuts = parseInt(donutString);
			if (donutString.indexOf("dozen") != -1)
				numDonuts *= 12;
			return numDonuts;
			}
		function placeOlder(){
			if(getElementById("name").value == " ")
				alert("I'm sorry but you have to provide your name before you submit!")
			else if(getElementById("time").value == " ")
				alert("I'm sorry but you have to provide number of time till you pick up!")
			else
				form.submit();
			}
	</script>
</head>
<body>
	<div id="frame">
	<div class="heading">Duncan's Just-In-Time Donuts</div>
    <div class="subheading">All donuts 50 cents each, cake or glazed!</div>
    <div id="left">
      <img src="donuttime.png" alt="Just-In-Time Donuts" />
    </div>
	<form name="orderform" action="donuts.php" method="POST">
		<div class="field">
		Name:<input type="text" id="name" value=""  />
		</div>
		<div class="field">
		#of cake donuts:<input type="text" id="cakedonuts" name="cakedonuts" 
			value="" onchange="updateOrder()" />      <!--name有什么用？？？-->
		</div>
		<div class="field">
		#of glazed donuts:<input type="text" id="glazeddonuts" name="glazeddonuts"
			value="" onchange="updateOrder()" />
		</div>
		<div class="field">
		Minutes till pickup:<input type="text" id="time" name="time"
			value=""  />
		</div>
		<div class="field">
		Subtotal:<input type="text" id="subtotal" name="subtotal"
			value=""  />
		</div>
		<div class="field">
		Tax:<input type="text" id="tax" name="tax"
			value=""  />
		</div>
		<div class="field">
		Total:<input type="text" id="total" name="total"
			value=""  />
		</div>
		<div class="field">
		<input type="button"  value="Place Order" onclick="placeOrder(this.form)" />
		</div>
	</form>
	</div>
</body>
</html>
